<html>
	<head>
		<title>OYAKEY DRUMPAD</title>

		<meta charset="utf-8"/>
   		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
		<link rel="stylesheet" type="text/css" href="Ressources/CSS/style.css">
		<script type="text/javascript" src="Ressources/Script/soundbox.js"></script>
	</head>
	<body>

		<!-- <img src="img/logo.png" alt="Logo Oyakey" width="300px"/> -->

		<div id="logo"></div>
		<h2>DRUMPAD</h2>
		<a id="back" href="../Index.html">Go back to the portfolio</a>

			<nav id="drums">
				<div class="drum" id="drum1" onclick="setDrum(d1);"></div>
				<div class="drum" id="drum2" onclick="setDrum(d2);"></div>
				<div class="drum" id="drum3" onclick="setDrum(d3);"></div>
			</nav>
			<nav id="Basses">
			<div class="bass" id="bass1" onclick="setBass(b1);"></div>
			<div class="bass" id="bass2" onclick="setBass(b2);"></div>
			<div class="bass" id="bass3" onclick="setBass(b3);"></div>
			</nav>
			<!--Leads-->
			<nav id="leads">
				<div class="lead" id="lead1" onclick="setLead(l1);"></div>
				<div class="lead" id="lead2" onclick="setLead(l2);"></div>
				<div class="lead" id="lead3" onclick="setLead(l3);"></div>
			</nav>
			<div id="fond" class="tuto"></div>
			<div id="tuto" class="tuto">
				<div id="box" class="tuto">
					<h1>Welcome !</h1>
					<p>To close this window, click on "ok",<br/>then click on the coloured buttons.<br/><br/>
					The blue buttons play the percussions,<br/>
					The red ones play the basslines,<br/>
					And the purple ones play the main lead sounds.

					</p>
					<button id='close'>Ok</button>
				</div>
			</div>

			<div id="contact">
				<div id="contactbox" class="contact">
					<p>You just recreated on of my production ! I made all of this application content, from sound design to programming, designing images, logos, buttons ..
					<br/><br/>
					Studying multimedia, I'm passionated in art, mostly in music and graphic design
					<br/><br/>
					If you enjoyed this demonstration, you can contact me throught my mail, facebook or linkedin.
					</p>
					<a href="mailto:#">Mail</a>|
					<a href="#">Facebook</a>|
					<a href="#">Linkedin</a>
				</div>
			</div>


	</body>
	<script src="./Ressources/Tools/howler.js-master/dist/howler.js"></script>
	<script src="./Ressources/Tools/jquery-3.1.1.js"></script>
	<script>

	
	$(window).ready(function(){
	});

//-------------Défini les clips----------------

	    var d1 = new Howl({
	      src: ['./Ressources/Loops/drum_1.mp3']
	    });

	    var d2 = new Howl({
	      src: ['./Ressources/Loops/drum_2.mp3']
	    });

	    var d3 = new Howl({
	      src: ['./Ressources/Loops/drum_3.mp3']
	    });

	    var b1 = new Howl({
	      src: ['./Ressources/Loops/bass_1.mp3']
	    });

	    var b2 = new Howl({
	      src: ['./Ressources/Loops/bass_2.mp3']
	    });

	    var b3 = new Howl({
	      src: ['./Ressources/Loops/bass_3.mp3']
	    });

	    var l1 = new Howl({
	      src: ['./Ressources/Loops/lead_1.mp3']
	    });

	    var l2 = new Howl({
	      src: ['./Ressources/Loops/lead_2.mp3']
	    });

	    var l3 = new Howl({
	      src: ['./Ressources/Loops/lead_3.mp3']
	    });

//-------------Initialise les variables----------------

		var playlist = [];

		var playing = false;

		var setloop;

		var drum;

		var bass;

		var lead;

		$('div').click(playSong);

//-------------Ajoute ou enlève des clips de la playlist----------------

		function setDrum(d) {
			if (drum == d) {
				drum = undefined;
			}
			else {
				drum = d;
			}
			//song();
			console.log(drum);
		}

		function setBass(b) {
			if (bass == b) {
				bass = undefined;
			}
			else {
				bass = b;
			}
			//song();
			console.log(bass);
		}

		function setLead(l) {
			if (lead == l) {
				lead = undefined;
			}
			else {
				lead = l;
			}
			//song();
			console.log(lead);
		}

//-------------------Joue/arrète la playlist (à modifier)-------------------

		function playSong() {
			if (!playing) {

				if (drum !== undefined) drum.play();
				if (bass !== undefined) bass.play();
				if (lead !== undefined) lead.play();

				setloop = setInterval(function () {

					if (drum === undefined && 
						bass === undefined && 
						lead === undefined) {

						clearInterval(setloop);
						playing = false;

					}

					if (drum !== undefined) drum.play();
					if (bass !== undefined) bass.play();
					if (lead !== undefined) lead.play();

				},7549); // 1 bar = 3788, 2 bar = 7549

				playing = true;
			}
		}

//---------------------Fais briller les boutons--------------------------

		//Drums
		$('.drum').click( function(){

			if(($('.active').length == 0) && !($(this).hasClass("active"))) {

				$(this).toggleClass('active');

			}

			else if(($('.active').length > 0) && !($(this).hasClass("active"))) {

				$('.drum').removeClass('active');

				$(this).toggleClass('active');

			}

			else $('.drum').removeClass('active');

		});

		//Bass
		$('.bass').click( function(){

			if(($('.active').length == 0) && !($(this).hasClass("active"))) {

				$(this).toggleClass('active');

			}

			else if(($('.active').length > 0) && !($(this).hasClass("active"))) {

				$('.bass').removeClass('active');

				$(this).toggleClass('active');

			}

			else $('.bass').removeClass('active');
		});

			//Leads
			$('.lead').click( function(){

			if(($('.active').length == 0) && !($(this).hasClass("active"))) {

				$(this).toggleClass('active');

			}

			else if(($('.active').length > 0) && !($(this).hasClass("active"))) {

				$('.lead').removeClass('active');

				$(this).toggleClass('active');

			}

			else $('.lead').removeClass('active');


		});

		$('#close').click( function() { $('.tuto').fadeOut(200); });

		$('#contact').hide();

		$(window).click( function() { 
			if ((drum !== undefined) && (bass !== undefined) && (lead !== undefined)) {
			$('#contact').fadeIn(500);
			}
		});

	</script>

</html>
